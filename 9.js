/*! For license information please see 9.js.LICENSE.txt */
"use strict";(self.webpackChunkuserservices=self.webpackChunkuserservices||[]).push([[9],{2009:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var n=r(3884),a=r.n(n),l=r(8289),o=r(65),c=function(e){return fetch("/database.json").then(function(e){return e.json()}).then(function(t){return t.find(function(t){return t.id===e})})};function i(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function l(r,n,a,l){var i=n&&n.prototype instanceof c?n:c,s=Object.create(i.prototype);return u(s,"_invoke",function(r,n,a){var l,c,i,u=0,s=a||[],f=!1,m={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return l=t,c=0,i=e,m.n=r,o}};function d(r,n){for(c=r,i=n,t=0;!f&&u&&!a&&t<s.length;t++){var a,l=s[t],d=m.p,h=l[2];r>3?(a=h===n)&&(i=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=d&&((a=r<2&&d<l[1])?(c=0,m.v=n,m.n=l[1]):d<h&&(a=r<3||l[0]>n||n>h)&&(l[4]=r,l[5]=n,m.n=h,c=0))}if(a||r>1)return o;throw f=!0,n}return function(a,s,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,h),c=s,i=h;(t=c<2?e:i)||!f;){l||(c?c<3?(c>1&&(m.n=-1),d(c,i)):m.n=i:m.v=i);try{if(u=2,l){if(c||(a="next"),t=l[a]){if(!(t=t.call(l,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),c=1);l=e}else if((t=(f=m.n<0)?i:r.call(n,m))!==o)break}catch(t){l=e,c=1,i=t}finally{u=1}}return{value:t,done:f}}}(r,a,l),!0),s}var o={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var m=[][n]?t(t([][n]())):(u(t={},n,function(){return this}),t),d=f.prototype=c.prototype=Object.create(m);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,u(d,"constructor",f),u(f,"constructor",s),s.displayName="GeneratorFunction",u(f,a,"GeneratorFunction"),u(d),u(d,a,"Generator"),u(d,n,function(){return this}),u(d,"toString",function(){return"[object Generator]"}),(i=function(){return{w:l,m:h}})()}function u(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}u=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var l=function(t,r){u(e,t,function(e){return this._invoke(t,r,e)})};l("next",0),l("throw",1),l("return",2)}},u(e,t,r,n)}function s(e,t,r,n,a,l,o){try{var c=e[l](o),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var l=e.apply(t,r);function o(e){s(l,n,a,o,c,"next",e)}function c(e){s(l,n,a,o,c,"throw",e)}o(void 0)})}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],i=!0,u=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const h=function(e){var t=e.onScan,r=e.setOnScan,u=e.className,s=void 0===u?"":u,d=(0,n.useRef)(null),h=(0,n.useRef)(!1),b=m((0,n.useState)([]),2),v=b[0],g=b[1],p=m((0,n.useState)(null),2),y=p[0],w=p[1],x="reader",E=m((0,n.useState)(t||!1),2),N=E[0],k=E[1],j=(0,n.useRef)(0),C=function(){var e=f(i().m(function e(t){var n,a;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!h.current){e.n=1;break}return e.a(2);case 1:if(h.current=!0,e.p=2,d.current){e.n=3;break}d.current=new l.j9(x),e.n=4;break;case 3:if((n=d.current.getState())!==l.Qq.SCANNING&&n!==l.Qq.PAUSED){e.n=4;break}return e.n=4,d.current.stop();case 4:return e.n=5,d.current.start(t,{fps:10,qrbox:{width:300,height:300}},function(){var e=f(i().m(function e(t){var n,a;return i().w(function(e){for(;;)switch(e.n){case 0:if(!((n=Date.now())-j.current<1200)){e.n=1;break}return e.a(2);case 1:return j.current=n,e.n=2,c(t);case 2:if(a=e.v){e.n=3;break}return alert("Không tìm thấy sản phẩm"),e.a(2);case 3:o.g.getState().addItem({id:t,name:a.name||"không tìm thấy",brand:a.brand||"Không rõ",price:a.price||0,image:a.image||"https://product.hstatic.net/1000205116/product/37403542_2080234622240138_7694883310392049664_n_1024x1024.jpg",category:1}),k(!1),null==r||r(!1);case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),function(){});case 5:w(t),e.n=7;break;case 6:e.p=6,a=e.v,console.error("🚫 Lỗi khi khởi động máy quét:",a);case 7:return e.p=7,h.current=!1,e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}));return function(t){return e.apply(this,arguments)}}();return(0,n.useEffect)(function(){if(N)return l.j9.getCameras().then(function(e){if(g(e),e.length>0){var t=e.find(function(e){return e.label.toLowerCase().includes("back")||e.label.toLowerCase().includes("environment")});t||(t=e.length>1?e[e.length-1]:e[0]),C(t.id)}else alert("Không tìm thấy camera.")}).catch(function(e){console.error("🚫 Không thể lấy danh sách camera:",e),alert("Không thể truy cập camera.")}),function(){var e;null===(e=d.current)||void 0===e||e.stop().finally(function(){d.current=null})}},[N]),a().createElement("div",{className:"w-full h-full ".concat(s)},N?a().createElement("div",{className:"flex flex-col items-center justify-center w-full h-full relative"},a().createElement("div",{id:x,className:"relative w-full h-full rounded-lg overflow-hidden border border-gray-300"},a().createElement("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-white"}),a().createElement("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-white"}),a().createElement("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-white"}),a().createElement("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-white"})),v.length>1&&a().createElement("button",{onClick:function(){var e;if(!(v.length<2)&&y){var t=v.findIndex(function(e){return e.id===y}),r=null===(e=v[t])||void 0===e?void 0:e.label.toLowerCase().includes("front"),n=v.find(function(e){return r?e.label.toLowerCase().includes("back"):e.label.toLowerCase().includes("front")})||v[(t+1)%v.length];n&&C(n.id)}},className:"absolute top-4 right-4 z-10 px-3 py-1 bg-blue-600 text-white rounded shadow hover:bg-blue-700 transition"},"🔄 Đổi Camera"),a().createElement("button",{onClick:function(){k(!1),null==r||r(!1)},className:"absolute bottom-4 right-4 z-10 px-3 py-1 bg-gray-800 text-white rounded shadow hover:bg-red-600 transition"},"✖ Đóng")):a().createElement("div",{className:"flex flex-col items-center justify-center w-full h-full"},a().createElement("h2",{className:"text-base font-semibold mb-4 text-center"},"Đưa mã sản phẩm vào khung hình để quét"),a().createElement("div",{className:"relative w-19/20 h-34 mt-5"},a().createElement("button",{onClick:function(){k(!0),null==r||r(!0)},className:"w-full h-full bg-gray-700 text-white rounded-lg flex items-center justify-center text-xl hover:bg-green-600 transition"},"Bắt đầu quét"),a().createElement("div",{className:"absolute top-2 left-2 w-5 h-1 bg-white"}),a().createElement("div",{className:"absolute top-2 left-2 w-1 h-5 bg-white"}),a().createElement("div",{className:"absolute top-2 right-2 w-5 h-1 bg-white"}),a().createElement("div",{className:"absolute top-2 right-2 w-1 h-5 bg-white"}),a().createElement("div",{className:"absolute bottom-2 left-2 w-5 h-1 bg-white"}),a().createElement("div",{className:"absolute bottom-2 left-2 w-1 h-5 bg-white"}),a().createElement("div",{className:"absolute bottom-2 right-2 w-5 h-1 bg-white"}),a().createElement("div",{className:"absolute bottom-2 right-2 w-1 h-5 bg-white"}))))};var b=r(4933),v=r(8203);function g(){var e=(0,o.g)(function(e){return e.listItem})||[],t=e.reduce(function(e,t){return e+t.price*t.category},0);return a().createElement("div",{className:"h-full flex flex-col px-2"},a().createElement(h,{className:"h-3/10"}),e.length>0&&a().createElement("p",{className:"py-1 "},a().createElement("b",null,"Các sản phẩm đã quét:")),a().createElement("div",{className:"flex flex-col h-7/10 justify-between"},e.length>0&&a().createElement(b.A,{className:"h-4/5 mt-2 py-2 overflow-y-auto"}),0==e.length&&a().createElement("div",{className:"w-full flex flex-col justify-center items-center"},a().createElement("div",{className:"py-2 my-2"},a().createElement("b",null,"Hiện chưa có sản phẩm nào được quét")),a().createElement("div",null,"Vui lòng đưa sản phẩm "),a().createElement("div",null," vào khung để quét")),e.length>0&&a().createElement("div",null,a().createElement("hr",{className:"border border-black my-1"}),a().createElement("div",{className:"w-full flex flex-row justify-between items-center py-2 px-2"},a().createElement("div",{className:"text-xl"},"Tổng thanh toán: "),a().createElement("div",{className:"text-5xl text-[#b63383]"},(0,v.s)(t))))))}},4933:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(3884),a=r.n(n),l=r(65),o=r(9288),c=r(8203),i=r(2692),u=r(4295),s=r(5916),f=r(6858),m=r(5418),d=r(3441);function h(e){var t=e.open,r=e.setOpen,n=e.onClose,l=e.onConfirm,c=e.text1,h=e.text2;return a().createElement(u.A,{open:t,onClose:function(){r(!1),n()},maxWidth:"xs",fullWidth:!0,PaperProps:{className:"p-4 rounded-lg",style:{borderRadius:16}}},a().createElement(s.A,null,a().createElement(f.A,{className:"flex flex-col items-center"},a().createElement("img",{src:i,alt:"logo",width:80,height:80}))),a().createElement(m.A,{className:"flex flex-col items-center justify-center"},a().createElement(d.A,{align:"center",variant:"body1",className:"mb-2"},c),a().createElement(d.A,{align:"center",variant:"body1"},h),a().createElement(o.A,{variant:"contained",onClick:l,sx:{backgroundColor:"#e464bc","&:hover":{backgroundColor:"#c3399a"},"&:focus":{backgroundColor:"#b63383"},textTransform:"none",fontSize:"0.9rem",px:4,mt:4}},"Xác nhận")))}var b=r(3518);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e){var t,r,i=e.item,u=(t=(0,n.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],i=!0,u=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],f=u[1];return a().createElement("div",{className:"w-95/100 h-25 flex flex-row my-1 "},a().createElement("div",{className:"w-full relative h-full flex flex-row justify-between items-center rounded-lg border border-gray-300 shadow-sm"},a().createElement("div",{className:"flex w-full flex-row items-center h-25 justify-start"},a().createElement("img",{src:i.image,alt:i.name,className:"object-cover shadow w-25 h-25 p-1"}),a().createElement("div",{className:"my-3 mx-1 flex flex-col w-full items-center h-25 justify-start items-start"},a().createElement("h4",{className:"text-lg font-semibold w-4/5 h-15",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"}},i.name),a().createElement("div",{className:"flex flex-row justify-between items-center h-10 w-full"},a().createElement("p",{className:"text-sm w-4/10 text-gray-500"},"Giá: ",(0,c.s)(i.price)),a().createElement("div",{className:"flex flex-row  items-center justify-center mx-1"},a().createElement(o.A,{variant:"contained",size:"small",onClick:function(){l.g.getState().updateNumItem(i.id,1)},sx:{minWidth:0,width:26,height:26,padding:0,backgroundColor:"#d9d9d9",border:"1px solid #1e40af",color:"black",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center","&:hover":{backgroundColor:"#d0d0f0"}}},"+"),a().createElement("div",{className:"text-sm text-gray-500 mx-2 w-5 flex justify-center items-center"},i.category),a().createElement(o.A,{variant:"contained",size:"small",sx:{minWidth:0,width:26,height:26,padding:0,backgroundColor:"#d9d9d9",border:"1px solid #1e40af",color:"black",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center","&:hover":{backgroundColor:"#d0d0f0"}},className:"text-black",onClick:function(){l.g.getState().updateNumItem(i.id,-1)}},"        -"))))),a().createElement("div",{className:"w-auto absolute -right-2 -top-2 flex flex-row justify-end items-center"},a().createElement(o.A,{variant:"contained",onClick:function(){f(!0)},className:"flex justify-center items-center",sx:{minWidth:26,height:26,padding:.5,fontSize:"0.75rem",borderRadius:"50%",backgroundColor:"white",color:"red",border:"1px solid red"}},a().createElement(b.A,{sx:{fontSize:16,color:"red"}})))),a().createElement(h,{open:s,setOpen:f,onClose:function(){return f(!1)},onConfirm:function(){f(!1),l.g.getState().removeItem(i)},text1:"Bạn có chắc muốn ",text2:"xóa sản phẩm này?"}))}function p(e){var t=e.className,r=(0,l.g)(function(e){return e.listItem})||[];return a().createElement("div",{className:"mt-2 py-2 flex flex-col items-center gap-3 w-full ".concat(t||"")},r.length>0?r.map(function(e,t){return a().createElement(g,{key:e.id||t,item:e})}):a().createElement("div",{className:"flex flex-col items-center text-gray-500"},"Hiện chưa có sản phẩm nào được quét"))}},8203:(e,t,r)=>{r.d(t,{s:()=>n});var n=function(e){return"number"!=typeof e?"":e.toLocaleString("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0,maximumFractionDigits:0}).replace(/\s?₫$/,"")}}}]);